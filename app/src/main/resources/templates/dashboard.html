<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Estación Meteorológica</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        table {
            margin: 20px auto;
            border-collapse: collapse;
            width: 30%;
        }

        th, td {
            border: 1px solid #999;
            padding: 8px;
        }

        th {
            background-color: #eee;
        }

        .tabla-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .tabla {
            margin: 15px;
        }

        button {
            padding: 10px 15px;
            background-color: green;
            color: white;
            border: none;
            margin-bottom: 20px;
        }

        .pagination {
            margin-top: 20px;
        }

        .pagination a, .pagination span {
            display: inline-block;
            margin: 2px;
            padding: 5px 10px;
            border: 1px solid #ccc;
            text-decoration: none;
            color: black;
            background-color: white;
            border-radius: 5px;
        }

        .pagination a:hover {
            background-color: #ddd;
        }

        .pagination .actual {
            background-color: green;
            color: white;
            border: none;
        }

        .pagination-form {
            margin-top: 10px;
        }

        .tarjetas-mediciones {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px auto;
            flex-wrap: wrap;
        }

        .tarjeta {
            background-color: #f0f8ff;
            border-radius: 10px;
            padding: 15px;
            min-width: 150px;
        }

        .tarjeta h3 {
            margin: 0;
        }

        .tarjeta p {
            font-size: 1.5em;
        }
    </style>
</head>
<body>

<h1>Estación meteorológica - grupo1</h1>

<!-- Tarjetas de mediciones recientes -->
<div class="tarjetas-mediciones">
    <div class="tarjeta">
        <h3>Temperatura</h3>
        <p th:text="${mediciones.temperatura + ' °C'}"></p>
    </div>
    <div class="tarjeta">
        <h3>Humedad</h3>
        <p th:text="${mediciones.humedad + ' %'}"></p>
    </div>
    <div class="tarjeta">
        <h3>Vel. Viento</h3>
        <p th:text="${mediciones.velocidadViento + ' km/h'}"></p>
    </div>
    <div class="tarjeta">
        <h3>Dir. Viento</h3>
        <p th:text="${mediciones.direccionViento}"></p>
    </div>
    <div class="tarjeta">
        <h3>Precipitación</h3>
        <p th:text="${mediciones.precipitacion + ' mm'}"></p>
    </div>
</div>

<form method="get" th:action="@{/}">
    <button type="submit">Recargar página</button>
</form>

<div class="tabla-container">
    <div class="tabla">
        <h2>Velocidad del Viento</h2>
        <table>
            <thead>
            <tr><th>ID</th><th>Velocidad (km/h)</th><th>Fecha</th></tr>
            </thead>
            <tbody>
            <tr th:each="v : ${velocidades.content}">
                <td th:text="${v.id}"></td>
                <td th:text="${v.velocidad}"></td>
                <td th:text="${v.fecha}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="tabla">
        <h2>Dirección del Viento</h2>
        <table>
            <thead>
            <tr><th>ID</th><th>Dirección</th><th>Fecha</th></tr>
            </thead>
            <tbody>
            <tr th:each="d : ${direcciones.content}">
                <td th:text="${d.id}"></td>
                <td th:text="${d.direccion}"></td>
                <td th:text="${d.fecha}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="tabla">
        <h2>Precipitación</h2>
        <table>
            <thead>
            <tr><th>ID</th><th>Precipitación (mm)</th><th>Fecha</th></tr>
            </thead>
            <tbody>
            <tr th:each="p : ${precipitaciones.content}">
                <td th:text="${p.id}"></td>
                <td th:text="${#numbers.formatDecimal(p.probabilidad, 1, 1)}"></td>
                <td th:text="${p.fecha}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="tabla">
        <h2>Humedad</h2>
        <table>
            <thead>
            <tr><th>ID</th><th>Humedad (%)</th><th>Fecha</th></tr>
            </thead>
            <tbody>
            <tr th:each="h : ${humedades.content}">
                <td th:text="${h.id}"></td>
                <td th:text="${h.humedad}"></td>
                <td th:text="${h.fecha}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="tabla">
        <h2>Temperatura</h2>
        <table>
            <thead>
            <tr><th>ID</th><th>Temperatura (°C)</th><th>Fecha</th></tr>
            </thead>
            <tbody>
            <tr th:each="t : ${temperaturas.content}">
                <td th:text="${t.id}"></td>
                <td th:text="${t.temperatura}"></td>
                <td th:text="${t.fecha}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="pagination">
    <span th:text="'Página ' + ${paginaActual + 1} + ' de ' + ${velocidades.totalPages}"></span>

    <a th:if="${paginaActual > 0}"
       th:href="@{/(
           pagina=0,
           tamanoPagina=${tamanoPagina}
       )}">&laquo;</a>

    <a th:if="${paginaActual > 0}"
       th:href="@{/(
           pagina=${paginaActual - 1},
           tamanoPagina=${tamanoPagina}
       )}">&lt;</a>

    <span th:each="i : ${#numbers.sequence(0, velocidades.totalPages - 1)}"
          th:if="${i >= paginaActual - 2 && i <= paginaActual + 2}"
          th:classappend="${i == paginaActual} ? 'actual'">
        <a th:if="${i != paginaActual}"
           th:href="@{/(
               pagina=${i},
               tamanoPagina=${tamanoPagina}
           )}"
           th:text="${i + 1}"></a>
        <span th:if="${i == paginaActual}" th:text="${i + 1}"></span>
    </span>

    <a th:if="${paginaActual + 1 < velocidades.totalPages}"
       th:href="@{/(
           pagina=${paginaActual + 1},
           tamanoPagina=${tamanoPagina}
       )}">&gt;</a>

    <a th:if="${paginaActual + 1 < velocidades.totalPages}"
       th:href="@{/(
           pagina=${velocidades.totalPages - 1},
           tamanoPagina=${tamanoPagina}
       )}">&raquo;</a>

    <span style="margin-left: 20px;">Registros por página:</span>
    <form method="get" th:action="@{/}" class="pagination-form" style="display:inline;">
        <select name="tamanoPagina" onchange="this.form.submit()">
            <option th:value="10" th:selected="${tamanoPagina == 10}">10</option>
            <option th:value="20" th:selected="${tamanoPagina == 20}">20</option>
            <option th:value="50" th:selected="${tamanoPagina == 50}">50</option>
            <option th:value="100" th:selected="${tamanoPagina == 100}">100</option>
        </select>
        <input type="hidden" name="pagina" th:value="${paginaActual}" />
    </form>
</div>

</body>
</html>
